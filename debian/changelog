freedombox-setup (0.0.35) UNRELEASED; urgency=low

  * Upload to Debian unstable.
  * Update the package description.
  * Add homepage and vcs links in control file.
  * Depend on essential package hostname to ensure it is pulled in
    also when using debootstrap --variant minbase.
  * Move ~fbx/README file to /usr/share/doc/ and copy it in place in
    setup.d/45_user-doc, to make sure file only show up when setting
    up a FreedomBox.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 16 Mar 2014 18:53:37 +0100

freedombox-setup (0.0.34) wheezy; urgency=low

  [ Nick Daly ]
  * Reverse roles of eth0 and eth1 ports.  Now, eth0 is a DHCP client,
    and eth1 (if it exist) is a DHCP server.

 -- Petter Reinholdtsen <pere@debian.org>  Fri, 14 Mar 2014 22:28:48 +0100

freedombox-setup (0.0.33) wheezy; urgency=low

  [ Nick Daly ]
  * Generate random Globalscale MAC addresses, not Xerox ones.

  [ Petter Reinholdtsen ]
  * Add Bdale Garbee and Nick Daly as uploaders.

 -- Petter Reinholdtsen <pere@debian.org>  Thu, 13 Mar 2014 18:34:45 +0100

freedombox-setup (0.0.32) wheezy; urgency=low

  [Nick Daly]
  * MAC changes now apply to /etc/network/interfaces; fix docs.
    - The sed command shouldn't've started with "^".
    - Don't "wc -l" the wired interface list.
    - Replace deprecated "service networking restart".
    - Tabs to 4 spaces. (everywhere)
  * Moved provide-source from 60 to 99 to make sure the source of all
    packages are fetched for images needing source.

 -- Petter Reinholdtsen <pere@debian.org>  Fri, 28 Feb 2014 22:52:54 +0100

freedombox-setup (0.0.31) wheezy; urgency=low

  [ Nick Daly ]
  * Correct network setup to use bash and work better
    on the Dreamplug.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 04 Feb 2014 23:05:01 +0100

freedombox-setup (0.0.30) wheezy; urgency=low

  [ Petter Reinholdtsen ]
  * Add ntp as dependency, to make sure the clock is correct (and not
    1970, as it end up as on the Raspberry PI).
  * Drop unused pandoc from dependency list.  Thanks to Nick Daly for
    noticing, as it is currently missing in Jessie.

  [ Nick Daly ]
  * Drop setup.d/70_fetch-projects.  Those that want to look at the
    source can fetch it themselves.
  * Drop unused setup.d/75_projects-setup.
  * Adjust network setup to get it working on the Dreamplug.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 27 Jan 2014 15:08:51 +0100

freedombox-setup (0.0.29) wheezy; urgency=low

  [ James Valleroy ]
  * Force overwrite of snakeoil certificates during first run script.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 02 Dec 2013 01:32:04 +0100

freedombox-setup (0.0.28) wheezy; urgency=low

  [ James Valleroy ]
  * Add setup script to install tor as bridge relay.
  * Fix lxc template install location.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 01 Dec 2013 18:42:49 +0100

freedombox-setup (0.0.27) wheezy; urgency=low

  [ James Valleroy ]
  * Dreamplug: after configuring network in first-run, setup persistent
    rules using udev script write_net_rules.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 17 Nov 2013 22:14:17 +0100

freedombox-setup (0.0.26) wheezy; urgency=low

  * Extend plinth-server test to check HTTP reply from plinth.
  * New web-proxy test to check if privoxy is listening.
  * Depend on lsof to make debugging easier.
  * Depends and recommends on batctl, bridge-utils, rfkill and
    wireless-tools to have the tools needed to configure wireless,
    bridging and batman-adv mesh networking available.  Recommends for
    the packages that might not be available on all architectures.
  * Change setup.d/91_privoxy to install privoxy instead of
    freedombox-privoxy, as the latter seem to have no maintainer at
    the moment.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 03 Nov 2013 10:48:46 +0100

freedombox-setup (0.0.25) wheezy; urgency=low

  * Depend on vim-tiny to get some editor installed by default.
  * Add debug information when configuring git for etckeeper.
  * Change setup.d/90_apache2 to not expand variables when creating
    /etc/apache2/sites-available/fbx.conf. Based on patch from James
    Valleroy.

 -- Petter Reinholdtsen <pere@debian.org>  Sat, 02 Nov 2013 07:15:11 +0100

freedombox-setup (0.0.24) wheezy; urgency=low

  * Move code to set up /etc/network/interfaces from setup.d/ to
    first-run.d/05_network to allow it to be configured based on the
    detected hardware on first boot.
  * Move first-run flag file to /var/lib/freedombox/ for FHS
    compliance.
  * Invert logic deciding when to run the first-run init.d script, to
    make sure it is only run after setup.d is executed, and not by
    just installing freedombox-setup, to avoid surprising those
    testing the Debian package.

 -- Petter Reinholdtsen <pere@debian.org>  Fri, 01 Nov 2013 20:41:05 +0100

freedombox-setup (0.0.23) wheezy; urgency=low

  [ James Valleroy ]
  * Add a new apache server conf file to replace jwchat.conf and
    forward plinth requests to plinth.conf.

  [ Petter Reinholdtsen ]
  * Change setup.d/10_dreamplug to only add /tmp/ as tmpfs in fstab,
    as the code setting device names for / and /boot/ is not needed
    when we use vmdebootstrap.

 -- Petter Reinholdtsen <pere@debian.org>  Thu, 31 Oct 2013 18:43:35 +0100

freedombox-setup (0.0.22) wheezy; urgency=low

  * Add binary dependency on dnsutils for dig to get testsuite working
    out of the box.
  * Add binary dependency on hostname needed by setup.d scripts.
  * Avoid force removal of file to avoid warning om setup.d/98_next-is-
    first-run when /var/freedombox/first-run is missing.

 -- Petter Reinholdtsen <pere@debian.org>  Wed, 30 Oct 2013 09:12:06 +0100

freedombox-setup (0.0.21) wheezy; urgency=low

  * Disable setup.d/50_openvpn, which seem to be old cruft.
  * Add new dns-server check to detect if DNSSEC is enabled or not.
  * Make sure first-run logs output to /var/log/freedombox-first-run.log.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 29 Oct 2013 23:34:03 +0100

freedombox-setup (0.0.20) wheezy; urgency=low

  * Remove setup.d/85_plinth, now part of the plinth package.
  * Add two new testsuite checks, looking for a running Plinth and DNS
    server.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 28 Oct 2013 10:02:56 +0100

freedombox-setup (0.0.19) wheezy; urgency=low

  * Start on test suite framework.  Add simple LDAP and XMPP test as a
    start.
  * Insert code in setup.d/10_dreamplug to set up Dreamplug and
    Raspberry Pi kernel and initrd, as well as enabling serial console
    on the Dreamplug, copied from the freedom-maker system.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 28 Oct 2013 08:06:10 +0100

freedombox-setup (0.0.18) wheezy; urgency=low

  * Update dnsmasq server configuration for new version in Debian
    Jessie.  Patch from James Valleroy.

 -- Petter Reinholdtsen <pere@debian.org>  Sat, 19 Oct 2013 20:47:41 +0200

freedombox-setup (0.0.17) wheezy; urgency=low

  [ Petter Reinholdtsen ]
  * Added new dependencies htop, iftop and tcpdump to make it easier
    to debug the freedombox.  Might be removed in a release build.
  * Added setup.d/98_next-is-first-run to make sure
    /var/freedombox/first-run is removed and init.d/first-run is
    triggered on the next reboot.
  * Update setup.d/85_plinth with the apache modules needed to get
    plinth+ssl working.

 -- Petter Reinholdtsen <pere@debian.org>  Sat, 19 Oct 2013 09:20:13 +0200

freedombox-setup (0.0.15) wheezy; urgency=low

  [ Nick Daly ]
  * Adjust setup.d/95_plinth to use Apache config from the new
    plinth package, which should fix SSL setup.

  [ Petter Reinholdtsen ]
  * Depend on plinth (>= 0.3.0.0.git.20131007.pere.2) to get a version
    that should work with the new setup.d/85_plinth file.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 07 Oct 2013 12:18:18 +0200

freedombox-setup (0.0.14) wheezy; urgency=low

  [ Petter Reinholdtsen ]
  * Make sure to exit on first error in postinst (thank you lintian).
  * Adjust first-run init.d script to commit to etckeeper before
    starting too, to document changes done at this stage.
  * Disable SSL in plinht, as it isn't working yet.
  * Fix typo causing apache to log  to /error.log and /access.log
    for plinth.

  [ James Valleroy ]
  * Fix bug in fetch-projects that caused a few projects to end up in
    root directory.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 06 Oct 2013 11:42:04 +0200

freedombox-setup (0.0.13) wheezy; urgency=low

  * Correct etckeeper/git workaround to really detect when user.email
    must be set.

 -- Petter Reinholdtsen <pere@debian.org>  Sat, 05 Oct 2013 14:17:28 +0200

freedombox-setup (0.0.12) wheezy; urgency=low

  * Added LXC template debian-freedombox by Rob van der Hoeven from
    http://freedomboxblog.nl/data/lxc-debian-box.gz.
  * Adjusted setup.d/20_lxc to document how it could be used.
  * Updated LXC template debian-freedombox with changes done in lxc
    version 0.9.0~alpha3-2+deb8u1, to only keep the relevant changes
    relative to the official Debian version in Jessie.
  * Added postinst script to fix etckeeper user.email if the automatic
    value is invalid.
  * Added new setup.d/15_ssh-keys to remove the SSH keys before any
    images are created, to make sure only unique keys are used on
    clients.
  * Added new first-run.d/85_jwchat and adjusted setup.d/85_jwchat to
    remove ejabberd SSL certificate from images and generate it on
    first boot.
  * Added new setup.d/30_ldap-server to start on LDAP server setup.

 -- Petter Reinholdtsen <pere@debian.org>  Sat, 05 Oct 2013 13:21:25 +0200

freedombox-setup (0.0.11) wheezy; urgency=low

  * Fix setup.d/20_lxc, make sure to install lxc non-interactively.
  * Adjust setup.d/60_provide-source to skip this step if
    NOSOURCE=true is set, to speed up test installations.
  * Add the d-i preseed files to preseed/ in the source package.
  * Adjusted setup.d/70_fetch-projects to look up home directory and
    gid dynamically.  Corrected GIT url for FreedomBuddy.
  * Adjusted setup.d/01_etckeeper-pre to set the global git user.email
    for root to make sure etckeeper always is able to commit changes.
  * Adjusted first-run init.d script to commit changes in /etc/ using
    etckeeper.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 01 Oct 2013 10:03:53 +0200

freedombox-setup (0.0.10) wheezy; urgency=low

  [ Nick Daly ]
  * Update handling of SSL setup in apache.

  [ Petter Reinholdtsen ]
  * Move generation of snakeoil SSL certificate from setup to
    first-run, to make it unique for each machine.
  * New script setup.d/20_lxc to set up LXC for use by the different
    services.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 01 Oct 2013 07:22:58 +0200

freedombox-setup (0.0.9) wheezy; urgency=low

  [ Petter Reinholdtsen ]
  * Added key-report and freedombox-todos to list of repositories feched
    by setup.d/70_fetch-projects.  Dropped exmachina, now integrated with
    plinth.
  * Added setup.d/05_apt-sources to disable cdrom APT sources after
    installation, to make sure plinth can install packages without
    asking for a CD to be installed.
  * Rewrote setup.d/30_dnsmasq-server to split config in three
    parts, one static and two that could change.

  [ Nick Daly ]
  * Added setup.d/01_etckeeper-pre to store /etc/ status before
    applying FreedomBox setup.
  * Added code to use snakeoil SSL certificate with Apache, and put
    plinth behind this https connection.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 30 Sep 2013 20:38:23 +0200

freedombox-setup (0.0.8) wheezy; urgency=low

  * Fix typo in 90_jwchat hanging the setup.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 15 Sep 2013 23:17:09 +0200

freedombox-setup (0.0.7) wheezy; urgency=low

  * Fix typo in update-rc.d arguments in rules file.
  * Adjust setup.d/80_plinth to create apache site file with .conf
    ending to work with apache2 in Jessie.
  * Created new /usr/lib/freedombox/first-run.d/ directory and moved
    most code from init.d/first-run to this directory, to make the
    first-run code extendable using extra packages.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 15 Sep 2013 22:32:56 +0200

freedombox-setup (0.0.6) wheezy; urgency=low

  * Pull in libnss-myhostname and remove host name from /etc/hosts, to
    avoid having to update /etc/hosts when the local hostname change.
  * Drop unused wajig as dependency.
  * Make sure to commit the current status of /etc/ at the end of the
    setup.d run.
  * Adjust 90_jwchat to only update ejabberd.cfg once if it is executed
    several times.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 15 Sep 2013 09:51:57 +0200

freedombox-setup (0.0.5) wheezy; urgency=low

  * Drop prosody from dependencies, as jwchat pull in ejabberd and two
    XMPP servers should not be running at the same time on the
    Freedombox.
  * Drop isc-dhcp-server from dependencies and disable
    setup.d/40_dhcp-server for now, as dnsmasq is also providing a
    DHCP server and we only need one DHCP server.  As dnsmasq also is
    the DNS server, it can not be removed without a larger rewrite of
    the setup.
  * Make sure the jwchat and ejabberd configuration contain the
    correct hostname and ejabberd have mod_http_bind enabled to get
    XMPP and jwchat working out of the box.  Patch from James
    Valleroy.

 -- Petter Reinholdtsen <pere@debian.org>  Sun, 15 Sep 2013 06:51:29 +0200

freedombox-setup (0.0.4) wheezy; urgency=low

  * Add new setup.d/91_privoxy to set up freedombox-privoxy.
  * Remove plinth related call for 'a2enmod rewrite' in first-run, as it
    is already done in setup.d/80_plinth and do not have to happen
    during first boot.
  * Rewrite first-run and proxy script to use log_* functions for output.
  * Rewrite first-run script from bash to Bourne sh, to avoid the need
    to load bash during boot.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 10 Sep 2013 12:13:51 +0200

freedombox-setup (0.0.3) wheezy; urgency=low

  * Replace transitional package liblua5.1-sec1 with lua-sec, fixing
    installation problem in jessie.
  * Make sure to install jwchat non-interactively.

 -- Petter Reinholdtsen <pere@debian.org>  Tue, 10 Sep 2013 00:14:55 +0200

freedombox-setup (0.0.2) wheezy; urgency=low

  * Do not depend on jwchat, but instead pull it in using a setup.d
    script, to avoid failing to install when jwchat fail to install like
    it currently do in testing.
  * Add new helper script dreamplug-detect, and move all sbin tools to
    /usr/sbin/.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 09 Sep 2013 23:20:04 +0200

freedombox-setup (0.0.1) wheezy; urgency=low

  * Initial version based on setup from freedom-maker.

 -- Petter Reinholdtsen <pere@debian.org>  Mon, 09 Sep 2013 19:50:35 +0200
